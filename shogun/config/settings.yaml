# =============================================================
# 将軍システム v5.0 - Configuration
# =============================================================

system:
  name: "将軍システム Hybrid"
  version: "5.0"
  language: "ja"

# --- リポジトリ同期 ---
# GitHubリモートの {username}/ 以降と /home/claude/ 以降を同期
# 例: github.com/user/project → /home/claude/project
repo:
  local_base: "/home/claude"
  github_remote: ""  # git remote から自動取得。手動設定も可
  sync_interval_min: 5

# --- 侍大将 R1 (OpenVINO) ---
taisho:
  url: "http://192.168.1.11:11434"
  model: "DeepSeek-R1-Distill-Qwen-14B"
  quantization: "INT8 (OpenVINO)"
  kv_cache_precision: "u8"
  performance: "7.2 tok/s"
  memory_gb: 20

# --- Cloud Agents ---
cloud:
  # Primary: claude-cli (Pro版, npm @anthropic-ai/claude-code)
  # Fallback: Anthropic API (console.anthropic.com)
  shogun:
    codename: "Shogun"
    role: "将軍 - 最終決裁・戦略判断"
    cli_model: "opus"
    api_model: "claude-opus-4-5-20250514"
    cost_yen: 1350
  karo:
    codename: "Karo"
    role: "家老 - 作業割振り・複雑実装"
    cli_model: "sonnet"
    api_model: "claude-sonnet-4-5-20250514"
    cost_yen: 280

# --- 足軽 (MCP Servers) ---
ashigaru:
  count: 8
  memory_each_mb: "50-150"
  host: "192.168.1.10"
  servers:
    - id: 1
      name: "filesystem"
      role: "ファイル操作"
    - id: 2
      name: "github"
      role: "Git/GitHub操作"
    - id: 3
      name: "fetch"
      role: "Web情報取得"
    - id: 4
      name: "memory"
      role: "長期記憶"
    - id: 5
      name: "postgres"
      role: "データベース"
    - id: 6
      name: "puppeteer"
      role: "ブラウザ自動化"
    - id: 7
      name: "brave-search"
      role: "Web検索"
    - id: 8
      name: "slack"
      role: "チーム連携"

# --- Deployment Modes ---
modes:
  battalion:
    label: "大隊"
    description: "家老 + 将軍 + 侍大将 + 足軽 × 8"
    api_enabled: true
  company:
    label: "中隊"
    description: "侍大将 + 足軽 × 8 (API不使用)"
    api_enabled: false
    cost: 0

# --- Proxmox LXC ---
proxmox:
  ct100:
    name: "honmaru-control"
    memory_mb: 2048
    cores: 2
    ip: "192.168.1.10"
    role: "本陣 - タスクルーティング, MCP管理, Slack Bot"
  ct101:
    name: "taisho-openvino"
    memory_mb: 20480
    cores: 6
    ip: "192.168.1.11"
    role: "侍大将R1 - OpenVINO推論サーバー"

# --- Network ---
network:
  controller_host: "0.0.0.0"
  controller_port: 8080

# --- Cost Budget ---
budget:
  monthly_target_yen: 6000
  pro_subscription_yen: 3000
  electricity_yen: 800

# --- Monthly Maintenance (反省会) ---
maintenance:
  schedule:
    day_of_month: 1  # 毎月1日に実行
    hour: 9
    minute: 0
    timezone: "Asia/Tokyo"

  # 定期チェック項目
  checks:
    - id: "llm_versions"
      name: "LLMバージョン確認"
      description: "クラウドLLMの最新バージョンチェック"
      auto_update: false  # 手動確認推奨

    - id: "openvino_model"
      name: "OpenVINOモデル確認"
      description: "侍大将R1モデルの更新確認"
      auto_update: false

    - id: "mcp_servers"
      name: "MCPサーバー更新"
      description: "npm MCP パッケージのアップデート"
      auto_update: true

    - id: "system_health"
      name: "システムヘルスチェック"
      description: "各コンポーネントの動作確認"
      auto_update: false

    - id: "log_cleanup"
      name: "ログクリーンアップ"
      description: "30日以上のログファイル削除"
      auto_update: true

    - id: "cost_report"
      name: "月次コストレポート"
      description: "API使用量・コスト集計"
      auto_update: true

  # 通知設定
  notification:
    slack_channel: "#shogun-maintenance"
    email: ""  # オプション

  # レポート保存
  reports:
    directory: "reports/maintenance"
    retention_days: 365
